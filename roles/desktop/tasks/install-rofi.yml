- block:
  - name: Install rofi dependencies
    ansible.builtin.package:
      name:
        - bison
        - flex
    become: true

  - name: Clone rofi
    ansible.builtin.git:
      repo: https://github.com/davatorium/rofi.git
      dest: ~/src/github/system-repos/rofi
      recursive: yes

  - name: Make rofi build directory
    ansible.builtin.file:
      path: ~/src/github/system-repos/rofi/build 
      state: directory
      mode: 0755

  - name: Run rofi - autoreconf
    ansible.builtin.command: autoreconf -i
    args:
      chdir: ~/src/github/system-repos/rofi

  - name: Run rofi - configure
    ansible.builtin.command: ../configure --disable-check
    args:
      chdir: ~/src/github/system-repos/rofi/build

  - name: Run rofi - make
    ansible.builtin.command: make
    args:
      chdir: ~/src/github/system-repos/rofi/build

  - name: Run rofi - make install
    ansible.builtin.command: make install
    args:
      chdir: /home/gwendolyn/src/github/system-repos/rofi/build # fix absolute path
    become: true
